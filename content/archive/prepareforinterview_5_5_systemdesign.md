+++
title = "5天八股"
date = 2025-05-02T12:23:42+08:00
draft = false
description = ""
subtitle = "之System Design篇"
header_img = ""
short = false
toc = true
tags = []
categories = ["计算机"]
series = ["面试", "八股文"]
comment = false
summary = ""
+++

# 开始、系统设计RoadMap（资深后端开发岗位）

> 资深服务端开发，重点掌握系统设计逻辑与典型场景拆解，不深入运维与SRE方向

### 🧠 第一部分：系统设计核心思维与基础构建

| 模块     | 关键词                  | 要求                   |
| ------ | -------------------- | -------------------- |
| 设计目标理解 | 可扩展性、可用性、一致性、成本、性能   | 能识别 trade-off 并据此做决策 |
| 系统容量预估 | QPS、流量峰值、数据量估算       | 掌握估算公式、缓存/数据库选型策略    |
| 架构风格选择 | 单体 vs 微服务、分层架构、异步解耦  | 熟悉常见架构图与模块职责         |
| 核心组件职责 | Web 层、服务层、缓存、DB、消息队列 | 用例驱动，清楚组件选型原因        |

### 🚀 第二部分：高频系统设计场景拆解（核心复习重点）

> 每题都需掌握：**关键问题 + 架构图 + 模块设计 + 扩展优化**

| 场景           | 建议掌握内容                |
| ------------ | --------------------- |
| 🔗 短链系统      | 哈希冲突、反向解析、读多写少、热点缓存   |
| 🔥 秒杀系统      | 限流策略、库存一致性、削峰填谷、幂等设计  |
| 📩 IM系统      | 长连接、消息顺序、离线消息、消息存储    |
| 🧵 Feed流系统   | 拉/推模型、个性化排序、热点数据策略    |
| 📸 图片/视频上传   | CDN分发、断点续传、Hash 去重、鉴黄 |
| 🛒 电商购物车     | 登录/未登录合并、Redis存储、过期策略 |
| 🔍 搜索建议      | Trie前缀匹配、缓存淘汰、QPS处理优化 |
| 📊 投票/打分系统   | 防刷机制、Redis去重计数、幂等设计   |
| 📅 延时任务/提醒系统 | 延迟队列、幂等任务、时间精度设计      |
| 📚 文档协作系统    | 实时同步、版本冲突、CRDT/OT概念   |

### 🔍 第三部分：专题挑战训练（拉升上限）

| 专题        | 建议内容                     |
| --------- | ------------------------ |
| 分库分表设计    | 分片键、数据迁移方案、热点分片问题        |
| 缓存架构与一致性  | 穿透/雪崩、失效策略、缓存一致性方案       |
| 分布式ID生成   | Snowflake、美团Leaf、全局唯一性方案 |
| 分布式事务设计   | TCC、SAGA、最终一致性、幂等重试      |
| API 限流与熔断 | 滑动窗口、令牌桶、漏桶、熔断器原理        |
| 多级缓存策略    | 本地缓存+Redis+CDN、预热、淘汰     |
| 服务拆分原则    | 微服务边界识别、粒度、幂等与回滚         |

### 🎯 第四部分：大厂真题实战演练（可逆推架构）

| 公司        | 常见题目                     |
| --------- | ------------------------ |
| 字节跳动      | 抖音Feed流、短链、直播弹幕、在线文档     |
| 阿里巴巴      | 秒杀、购物车、商品搜索、优惠券系统        |
| 腾讯        | IM系统、游戏后端架构、缓存一致性方案      |
| Google    | 搜索建议、全局ID、文件同步系统         |
| Amazon    | 推荐系统、购物车、库存一致性           |
| Microsoft | Outlook邮件、OneNote协作、身份验证 |

* **刷题顺序推荐**：短链 → 秒杀 → Feed流 → IM → 上传系统 → 日志系统

# 一、系统架构

### 对比
| 对比维度        | 单体架构（Monolith）       | 微服务架构（Microservices）   |
| ----------- | -------------------- | ---------------------- |
| **特点**      | 所有功能在一个进程中，统一部署、统一构建 | 拆分为多个独立服务，服务间通过 API 通信 |
| **开发效率**    | 初期快，低成本，代码集中易于理解     | 初期成本高，需搭建服务框架与治理体系     |
| **部署运维**    | 简单，打包即可部署            | 复杂，需要服务编排、容器化、CI/CD    |
| **扩展能力**    | 整体扩容（垂直扩展为主）         | 按服务独立扩缩容（水平扩展）         |
| **模块耦合性**   | 强耦合，修改影响范围大          | 弱耦合，服务独立演进             |
| **团队协作**    | 小团队易协作，大团队冲突频繁       | 支持多团队并行开发              |
| **容错性**     | 一处故障可能影响全局           | 单个服务故障可容忍（需合理容错）       |
| **技术选型自由度** | 技术统一                 | 每个服务可选择最合适的技术栈         |
| **适用场景**    | 初创项目、快速迭代、功能简单系统     | 中大型系统、并发高、业务清晰场景       |

### 选择
| 场景                 | 推荐架构 | 理由         |
| ------------------ | ---- | ---------- |
| MVP 阶段、小团队、快速验证    | 单体   | 快速上线、低成本迭代 |
| 模块职责明确，团队人数较多      | 微服务  | 按领域拆分、并行开发 |
| 高频写操作 + 高并发        | 微服务  | 水平扩展、隔离瓶颈  |
| 部分模块需独立扩缩容（如推荐、搜索） | 微服务  | 提高资源利用率    |

### 面试官可能问什么？
| 提问点            | 应对策略                                 |
| -------------- | ------------------------------------ |
| 为什么你们系统采用了微服务？ | 结合业务规模、团队分工、模块解耦说明好处，并提及面临的挑战（如服务治理） |
| 如何做系统拆分？       | 按业务边界（如订单、用户、支付），避免频繁跨服务调用，保持领域聚合    |
| 你如何避免微服务间依赖地狱？ | 使用 API 网关统一入口、制定接口规范、引入服务注册与监控工具     |
| 单体架构什么时候更合适？   | 表示你了解 trade-off，比如初创阶段优先交付、成本敏感项目    |
| 微服务如何部署测试？     | 提及容器化（Docker）、CI/CD、灰度发布、集成测试手段      |
